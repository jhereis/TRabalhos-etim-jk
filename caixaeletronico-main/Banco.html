<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco</title>
</head>
<body>
    <script>
        var saldo = 100;
        var nome = prompt("Qual seu nome?")
        verificar_senha()
        function inicio_caixa(){
            alert("Olá " + nome + " Bem vindo ao nosso caixa")

            let opcao = parseInt(prompt("Insira a opção que deseja: \n 1) Saldo \n 2) Extrato \n 3) Saque \n 4) Depósito \n 5)Transferência \n 6) Sair \n"))

            switch(opcao){
                case 1:
                   alert("Saldo")
                   ver_saldo();
                   inicio_caixa();
                  break;
                case 2:
                    alert("Extrato")
                    ver_extrato();
                    inicio_caixa();
                    break;
                case 3:
                    alert("Saque");
                    fazer_saque();
                   break;
                case 4: 
                    alert("Depósito")
                    fazer_deposito();
                    ver_saldo();
                    inicio_caixa();
                    break;
                case 5:
                    alert("Transferência")
                    fazer_transferencia();
                    break;
                case 6:
                    alert("Sair")
                    sair_caixa();

                default:
                    if(opcao>6)
                    alert("Insira uma opção válida");
                    
            }

                
        }

        function ver_saldo() {
			alert('Seu saldo atual é: ' + saldo);
            inicio_caixa();
        }

        function ver_extrato(){
            alert("Compra realizada em 20/02/2022 - Shoppe - Debíto no valor de 20,00 R$ \n Compra realizada em 30/05/2022 - Kabum - Crédito no valor de 120,00 R$ \n Depósito recebido em 04/08/2022 - Valor de 100,00 R$ \n")
        }

        function fazer_saque(){
            if (saldo <= 0){
            alert("Operação não autorizada, sua conta não possui saldo")
            inicio_caixa();
            }
            let saque = parseFloat(prompt("Insira o valor do saque"));
            if(saque > saldo){
            alert("Você não possui saldo suficiente, seu saldo atual é de: " + saldo + " por favor informe uma quantidade valida ou faça um depósito")
            inicio_caixa();
            }
            if(isNaN(saque) || saque == ""){
            alert("Insira um valor válido");
            fazer_saque();
            }
            else{
            saldo -= saque
            ver_saldo();
            inicio_caixa();
            }
        }

        function fazer_deposito(){
            let deposito = parseFloat(prompt("Insira a quantidade que deseja depositar"));
            
            if(deposito<=0){
            alert("Insira um número válido");
            fazer_deposito();
            }
            else if(isNaN(deposito) || deposito == ""){
            alert("Insira um número");
            fazer_deposito();
            }
            else{
                saldo += deposito;
                ver_saldo();
            } 
        }

        function fazer_transferencia(){
            let conta = parseInt(prompt("Insira o número da conta"));

            if(isNaN(conta) || conta == ""){
            alert("Insira um valor de conta válido");
            fazer_transferencia();
            }
            let trans = parseFloat(prompt("Insira o valor que deseja transferir"))
            if(isNaN(trans) || trans == ""){
            alert("Insira um valor válido");
            fazer_transferencia();
            }
            else if(trans>saldo){
                alert("Operação negada")
                alert("Informe um valor que esteja dentro do seu saldo")
                fazer_transferencia();
            }
            else{
                saldo -= trans
                ver_saldo();
            }
        }

        function sair_caixa(){
            let sair = confirm("Deseja sair do caixa?")
            if (sair) {
				window.close();
			} else {
				inicio_caixa();
			}
        }

        function verificar_senha(){

            let senha = 8969;

            let userSenha = parseInt(prompt("Insira a senha para continuar"));

            if(isNaN(userSenha) || userSenha == ''){
                alert("Insira um valor válido para senha, somente números");
                verificar_senha();
            }
            else if (userSenha != senha){
                alert("Senha Invalida, tente novamente");
                verificar_senha();
            }
            else{
                alert("Estamos te encaminhando para operação");
            }
        }

        
       

        inicio_caixa()
    </script>
</body>
</html>
